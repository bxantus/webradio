(this["webpackJsonpwebradio-react"]=this["webpackJsonpwebradio-react"]||[]).push([[0],{18:function(t,e,a){t.exports=a(26)},23:function(t,e,a){},26:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),s=a(14),i=a.n(s),o=(a(23),a(1)),c=a.n(o),u=a(4),l=a(2),h=a(3),d=a(5),p=a(6);var f=function(t){Object(d.a)(a,t);var e=Object(p.a)(a);function a(){return Object(l.a)(this,a),e.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var t=this,e=this.props.stations;return e?e.map((function(e){return r.a.createElement("div",{className:"clickable station",onClick:function(){var a,n;return null===(a=t.props)||void 0===a||null===(n=a.onStationSelected)||void 0===n?void 0:n.call(a,e)},key:e.id},r.a.createElement("h3",null,e.name),r.a.createElement("div",{className:"tags"},e.tags.replace(/,(?=[^\s])/g,", ")),r.a.createElement("div",{className:"flexible horizontal details"},r.a.createElement("span",{className:"country"},(a=e.country).length>0?a:"Unknown"),r.a.createElement("img",{className:"votes",src:"/webradio/icons/votes.svg"}),r.a.createElement("span",{className:"flex1"},e.votes),r.a.createElement("span",{className:"codec"},e.codec," - ",e.bitrate," kbps")),r.a.createElement("hr",null));var a})):null}}]),a}(r.a.Component),v=function(t){Object(d.a)(a,t);var e=Object(p.a)(a);function a(t){var n;return Object(l.a)(this,a),(n=e.call(this,t)).state={results:void 0,searching:!1},n}return Object(h.a)(a,[{key:"componentWillMount",value:function(){var t=this,e=this.props.search;e.subscribe("searching",(function(e){t.setState({searching:e})})),e.subscribe("results",(function(e){t.setState({results:e})})),e.subscribe("query",(function(){document.scrollingElement&&(document.scrollingElement.scrollTop=0)}))}},{key:"render",value:function(){var t,e,a=this.state.results;return r.a.createElement("div",{className:"search flexible vertical "+(null!==(t=this.props.className)&&void 0!==t?t:"")},r.a.createElement("div",{className:"results"},r.a.createElement(f,{stations:a,onStationSelected:null===(e=this.props)||void 0===e?void 0:e.onStationSelected})))}}]),a}(r.a.Component),m=a(16);function b(t){return{name:t.name,id:t.stationuuid,tags:t.tags,country:t.country,language:t.language,icon:t.favicon,votes:t.votes,codec:t.codec,bitrate:t.bitrate}}var g=function(){function t(e){Object(l.a)(this,t),this.query=void 0,this.offset=0,this._hasMoreResults=!1,this.results=[],this.query=e,void 0==this.query.limit&&(this.query.limit=20)}return Object(h.a)(t,[{key:"search",value:function(){var t=Object(u.a)(c.a.mark((function t(){var e,a,n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(O,"/stations/search?name=").concat(this.query.name,"&order=votes&reverse=true&limit=").concat(this.query.limit,"&offset=").concat(this.offset),t.next=3,fetch(a).then((function(t){return t.json()}));case 3:n=t.sent,r=n.map(b),(e=this.results).push.apply(e,Object(m.a)(r)),this.offset=this.results.length,this._hasMoreResults=r.length==this.query.limit;case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"hasMoreResults",get:function(){return this._hasMoreResults}}]),t}();function y(t){return k.apply(this,arguments)}function k(){return(k=Object(u.a)(c.a.mark((function t(e){var a,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(O,"/url/").concat(e.id),t.next=3,fetch(a).then((function(t){return t.json()}));case 3:if(!(n=t.sent)||!n.url){t.next=8;break}return t.abrupt("return",n.url);case 8:return t.abrupt("return",void 0);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(t){return w.apply(this,arguments)}function w(){return(w=Object(u.a)(c.a.mark((function t(e){var a,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(O,"/stations/byuuid/").concat(e.id),t.next=3,fetch(a).then((function(t){return t.json()}));case 3:if(!(n=t.sent)||!n[0]){t.next=6;break}return t.abrupt("return",b(n[0]));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(t){return E.apply(this,arguments)}function E(){return(E=Object(u.a)(c.a.mark((function t(e){var a,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(O,"/vote/").concat(e.id),t.prev=1,t.next=4,fetch(a);case 4:if(!(n=t.sent).ok){t.next=12;break}return t.next=8,n.json();case 8:return n=t.sent,t.abrupt("return",n.ok);case 12:return t.abrupt("return",!1);case 13:t.next=18;break;case 15:return t.prev=15,t.t0=t.catch(1),t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t,null,[[1,15]])})))).apply(this,arguments)}var O="https://de1.api.radio-browser.info/json";function j(t){return void 0==t.codec||void 0==t.bitrate}function N(t){return C.apply(this,arguments)}function C(){return(C=Object(u.a)(c.a.mark((function t(e){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S(e);case 2:if(!(a=t.sent)){t.next=7;break}return e.codec=a.codec,e.bitrate=a.bitrate,t.abrupt("return",!0);case 7:return t.abrupt("return",!1);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var T=a(7),_=a(17),P=a(15);function I(){return M.apply(this,arguments)}function M(){return(M=Object(u.a)(c.a.mark((function t(){var e,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=localStorage.getItem("lastPlayed"))){t.next=7;break}if(!j(a=JSON.parse(e))){t.next=6;break}return t.next=6,N(a);case 6:return t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function F(t){localStorage.setItem("lastPlayed",JSON.stringify(t))}var R=function(){function t(){Object(l.a)(this,t),this.subs=new Map}return Object(h.a)(t,[{key:"add",value:function(t,e){var a=this.subs.get(t)||[];0==a.length&&this.subs.set(t,a);var n={onChange:e};return a.push(n),{unsubscribe:function(){var t=a.findIndex((function(t){return t==n}));t>=0&&a.splice(t)}}}},{key:"notifyFor",value:function(t,e){var a=this.subs.get(t);if(a){var n,r=Object(T.a)(a);try{for(r.s();!(n=r.n()).done;){n.value.onChange(e)}}catch(s){r.e(s)}finally{r.f()}}}}]),t}(),D=function(t){Object(d.a)(a,t);var e=Object(p.a)(a);function a(t){var n;return Object(l.a)(this,a),(n=e.call(this,t)).name="LoadError",n}return a}(Object(_.a)(Error)),q=function(){function t(){Object(l.a)(this,t),this.player=void 0,this.station=void 0,this.statusEmitter=[],this.subs=new R,this.loading=void 0,this._volume=100}return Object(h.a)(t,[{key:"setStation",value:function(){var t=Object(u.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.player&&(this.player.off(),this.player.stop(),this.player.unload(),this.player=void 0),this.fireStatusChange("load","station"),this.station=e,this.subs.notifyFor("station",e),F(e),this.loading=this.loadPlayer(e),t.abrupt("return",this.loading);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"loadPlayer",value:function(){var t=Object(u.a)(c.a.mark((function t(e){var a,n,r,s=this;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(e);case 2:if(n=t.sent,this.loading=void 0,n){t.next=7;break}throw this.fireStatusChange("error","cannot resolve station url"),new D("Cannot resolve station url");case 7:if((null===(a=this.station)||void 0===a?void 0:a.id)!=e.id){t.next=20;break}this.player&&(this.player.off(),this.player.unload()),this.player=new P.Howl({src:n,autoplay:!1,html5:!0,preload:!1}),this.fireStatusChange("stop"),this.player.on("load",(function(){return s.fireStatusChange("load","start playing")})),this.player.on("play",(function(){return s.fireStatusChange("play")})),this.player.on("stop",(function(){return s.fireStatusChange("stop")})),this.player.on("pause",(function(){return s.fireStatusChange("stop")})),r=function(t){return"number"==typeof t?"Error code: ".concat(t):"Details: ".concat(t)},this.player.on("loaderror",(function(t,e){return s.fireStatusChange("error","Loading the stream failed!\n"+r(e))})),this.player.on("playerror",(function(t,e){return s.fireStatusChange("error","Playback error!\n"+r(e))})),t.next=21;break;case 20:throw new D("Changed stations while loading");case 21:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"play",value:function(){var t=Object(u.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.player||!this.station){t.next=3;break}return t.next=3,this.loadPlayer(this.station);case 3:if(t.prev=3,!this.loading){t.next=7;break}return t.next=7,this.loading;case 7:t.next=16;break;case 9:if(t.prev=9,t.t0=t.catch(3),!(t.t0 instanceof D)){t.next=15;break}return t.abrupt("return");case 15:throw t.t0;case 16:this.player&&!this.player.playing()&&("unloaded"==this.player.state()&&this.fireStatusChange("load","stream"),this.player.volume(this._volume/100),this.player.play());case 17:case"end":return t.stop()}}),t,this,[[3,9]])})));return function(){return t.apply(this,arguments)}}()},{key:"stop",value:function(){this.player&&(this.player.off(),this.player.stop(),this.player.unload(),this.fireStatusChange("stop"),this.player=void 0)}},{key:"fireStatusChange",value:function(t,e){var a,n=Object(T.a)(this.statusEmitter);try{for(n.s();!(a=n.n()).done;){(0,a.value)(t,e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"onStatusChanged",value:function(t){return this.statusEmitter.push(t),t}},{key:"offStatusChanged",value:function(t){var e=this.statusEmitter.findIndex((function(e){return t==e}));e>=0&&this.statusEmitter.splice(e,1)}},{key:"subscribe",value:function(t,e){return this.subs.add(t,e)}},{key:"volume",set:function(t){this._volume=t,this.player&&this.player.volume(t/100)}}]),t}(),L=new(function(){function t(){Object(l.a)(this,t),this.stations=[],this.updateCbs=[]}return Object(h.a)(t,[{key:"add",value:function(t){this.isFavorite(t)||(this.stations.push(t),this.save())}},{key:"remove",value:function(t){var e=this.stations.findIndex((function(e){return e.id==t.id}));e>=0&&(this.stations.splice(e,1),this.save())}},{key:"isFavorite",value:function(t){return void 0!=this.stations.find((function(e){return e.id==t.id}))}},{key:"save",value:function(){localStorage.setItem("stations",JSON.stringify(this.stations)),this.changed()}},{key:"load",value:function(){var t=Object(u.a)(c.a.mark((function t(){var e,a,n,r,s,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=localStorage.getItem("stations"))){t.next=15;break}a=JSON.parse(e),n=[],r=Object(T.a)(a);try{for(r.s();!(s=r.n()).done;)j(i=s.value)&&n.push(N(i))}catch(o){r.e(o)}finally{r.f()}if(t.prev=6,!n.length){t.next=12;break}return t.next=10,Promise.all(n);case 10:this.stations=a,this.save();case 12:return t.prev=12,this.stations!=a&&(this.stations=a,this.changed()),t.finish(12);case 15:case"end":return t.stop()}}),t,this,[[6,,12,15]])})));return function(){return t.apply(this,arguments)}}()},{key:"onUpdated",value:function(t){return this.updateCbs.push(t),t}},{key:"changed",value:function(){var t,e=Object(T.a)(this.updateCbs);try{for(e.s();!(t=e.n()).done;){(0,t.value)()}}catch(a){e.e(a)}finally{e.f()}}},{key:"list",get:function(){return this.stations}}]),t}()),U=function(t){Object(d.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))).valueChangeSub=void 0,t.posStartDrag=0,t.valStart=0,t.sliderBg=r.a.createRef(),t.thumb=r.a.createRef(),t.sliderProgress=r.a.createRef(),t.dragging=!1,t.moveListener=function(e){return t.onPointerMove(e)},t.upListener=function(e){return t.onPointerUp(e)},t}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.valueChangeSub=this.model.subscribe("value",(function(){t.updateSliderStyles()})),this.setState({}),this.thumb.current&&this.thumb.current.setAttribute("touch-action","none")}},{key:"componentDidUpdate",value:function(){this.updateSliderStyles()}},{key:"componentWillUnmount",value:function(){this.valueChangeSub&&this.valueChangeSub.unsubscribe()}},{key:"updateSliderStyles",value:function(){if(this.sliderBg.current&&this.thumb.current){var t=this.model,e=this.sliderBg.current.clientWidth-this.thumb.current.clientWidth,a=this.thumb.current.clientWidth,n=(t.val-t.min)*e/(t.max-t.min),r=-(this.thumb.current.clientHeight-this.sliderBg.current.clientHeight)/2;this.thumb.current.setAttribute("style","left: ".concat(n,"px; top:").concat(r,"px")),this.sliderProgress.current&&this.sliderProgress.current.setAttribute("style","width: ".concat(n+a/2,"px"))}}},{key:"onPointerMove",value:function(t){if(this.dragging&&this.sliderBg.current&&this.thumb.current){var e=this.sliderBg.current.clientWidth-this.thumb.current.clientWidth,a=t.clientX-this.posStartDrag;if(e>0){var n=a*(this.model.max-this.model.min)/e;this.model.val=this.valStart+n}}}},{key:"onPointerDown",value:function(t){this.posStartDrag=t.clientX,this.valStart=this.model.val,this.dragging=!0,window.addEventListener("pointermove",this.moveListener),window.addEventListener("pointerup",this.upListener)}},{key:"onPointerUp",value:function(t){this.dragging=!1,window.removeEventListener("mousemove",this.moveListener),window.removeEventListener("mouseup",this.upListener)}},{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"slider bg",ref:this.sliderBg},r.a.createElement("div",{className:"slider progress",ref:this.sliderProgress}),r.a.createElement("span",{className:"thumb",ref:this.thumb,onPointerDown:function(e){return t.onPointerDown(e)}},this.props.children))}},{key:"model",get:function(){return this.props.model}}]),a}(r.a.Component),A=function(){function t(){Object(l.a)(this,t),this._min=0,this._max=100,this._val=0,this.subs=new R}return Object(h.a)(t,[{key:"setRange",value:function(t,e){if(void 0==t&&(t=this._min),void 0==e&&(e=this._max),t>=e)throw new Error("Invalid range! (min < max) should hold. Got: ".concat(t," >= ").concat(e));this._min=t,this._max=e,this._val<t?this.updateValue(t):this._val>e&&this.updateValue(e)}},{key:"subscribe",value:function(t,e){return this.subs.add(t,e)}},{key:"updateValue",value:function(t){this._val!=t&&(this._val=t,this.subs.notifyFor("value",t))}},{key:"val",get:function(){return this._val},set:function(t){t<this._min?t=this._min:t>this._max&&(t=this._max),this.updateValue(t)}},{key:"min",get:function(){return this._min}},{key:"max",get:function(){return this._max}}]),t}(),W=new q,B=function(t){Object(d.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={status:"stop",voting:!1,displayError:!1},t.statusChangeId=void 0,t.volume=new A,t}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.statusChangeId=W.onStatusChanged((function(e,a){var n;W.station&&(null===(n=t.props.station)||void 0===n?void 0:n.id)==W.station.id&&t.setState({status:e,detail:a,displayError:"error"==e})})),this.volume.val=75,this.volume.subscribe("value",(function(t){return W.volume=t}))}},{key:"componentWillUnmount",value:function(){this.statusChangeId&&W.offStatusChanged(this.statusChangeId)}},{key:"togglePlayback",value:function(){var t=Object(u.a)(c.a.mark((function t(){var e,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.props.station){t.next=2;break}return t.abrupt("return");case 2:if("stop"!=(e=this.getPlayStatus())&&"error"!=e){t.next=19;break}if("error"==e&&W.stop(),t.prev=5,this.setState({status:"load",detail:void 0}),(null===(a=W.station)||void 0===a?void 0:a.id)==this.props.station.id){t.next=10;break}return t.next=10,W.setStation(this.props.station);case 10:W.play(),t.next=17;break;case 13:if(t.prev=13,t.t0=t.catch(5),t.t0 instanceof D){t.next=17;break}throw t.t0;case 17:t.next=20;break;case 19:W.stop();case 20:case"end":return t.stop()}}),t,this,[[5,13]])})));return function(){return t.apply(this,arguments)}}()},{key:"getPlayStatus",value:function(){var t,e=this.state.status;return this.props.station&&this.props.station.id!=(null===(t=W.station)||void 0===t?void 0:t.id)&&(e="stop"),e}},{key:"getPlayDetail",value:function(){var t;return this.props.station&&this.props.station.id!=(null===(t=W.station)||void 0===t?void 0:t.id)?void 0:this.state.detail}},{key:"toggleFavorite",value:function(){var t=this.props.station;t&&(L.isFavorite(t)?L.remove(t):L.add(t),this.setState({}))}},{key:"vote",value:function(){var t=Object(u.a)(c.a.mark((function t(){var e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.props.station){t.next=2;break}return t.abrupt("return");case 2:return this.setState({voting:!0}),t.next=5,x(this.props.station);case 5:return t.sent,t.next=8,S(this.props.station);case 8:(e=t.sent)&&(this.props.station.votes=e.votes),this.setState({voting:!1});case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=this.props.station;if(!e)return null;var a=this.getPlayStatus(),n="/webradio/icons/".concat({play:"stop.svg",stop:"play.svg",load:"loading.svg",error:"play.svg"}[a]),s=this.getPlayDetail(),i=L.isFavorite(e),o=i?r.a.createElement("span",null,r.a.createElement("img",{className:"small-ico like",src:"/webradio/icons/like.svg"}),"Favorite"):void 0,c=r.a.createElement("button",{className:"play",onClick:function(e){return t.togglePlayback()}},r.a.createElement("img",{className:"play-ico ".concat(a),src:n})),u=r.a.createElement("div",{className:"error-popup flexible horizontal",onClick:function(){return t.setState({displayError:!1})}},r.a.createElement("img",{src:"/webradio/icons/info.svg"}),r.a.createElement("span",{className:"flex1"},s),r.a.createElement("img",{src:"/webradio/icons/close.svg"}));return r.a.createElement("div",{className:this.props.className+" flexible vertical player"},r.a.createElement("div",{className:"player-header flexible horizontal"},r.a.createElement("span",null,e.country),r.a.createElement("span",null,r.a.createElement("img",{className:"small-ico",src:"/webradio/icons/votes.svg"}),e.votes),o),r.a.createElement("h2",{className:"title"},e.name),r.a.createElement("p",{className:"tags"},e.tags),r.a.createElement("button",{className:"favorite-toggle",onClick:function(){return t.toggleFavorite()}},r.a.createElement("img",{className:"small-ico like",src:i?"/webradio/icons/unlike.svg":"/webradio/icons/like.svg"}),r.a.createElement("span",{className:"text"},i?"Remove Favorite":"Add as Favorite")),r.a.createElement("div",{className:"play-area  ".concat(this.state.displayError?"error":"")},this.state.displayError?u:c),r.a.createElement("div",{className:"flexible horizontal play-footer"},r.a.createElement("span",{className:"flex1"},e.codec," - ",e.bitrate," kbps"),r.a.createElement("button",{className:"vote",onClick:function(){return t.vote()},disabled:this.state.voting},r.a.createElement("img",{className:"small-ico",src:"/webradio/icons/votes.svg"}),"Vote")),r.a.createElement(U,{model:this.volume},r.a.createElement("img",{className:"volume",src:"/webradio/icons/volume.svg",draggable:"false"})))}}]),a}(r.a.Component),z=function(t){Object(d.a)(a,t);var e=Object(p.a)(a);function a(){return Object(l.a)(this,a),e.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"about "+this.props.className},r.a.createElement("h2",null,"About webradio"),r.a.createElement("p",null,"Open source webradio implementation using React."),r.a.createElement("p",null,"Uses the api provided by ",r.a.createElement("a",{target:"blank",href:"http://www.radio-browser.info"},"www.radio-browser.info")),r.a.createElement("p",null,"If you find any issues, or have feature requests please report them at the project's github page: ",r.a.createElement("a",{href:"https://github.com/bxantus/webradio",target:"blank"},"github.com/bxantus/webradio")),r.a.createElement("a",{href:"https://bxantus.github.io/webradio/index.html"},r.a.createElement("img",{className:"qr-code",src:"/webradio/address_qr.png"})),r.a.createElement("h4",null,"Link for mobile devices:"),r.a.createElement("p",{className:"small-margin"},"Scan the code to the right on a mobile phone to open webradio on it!"))}}]),a}(r.a.Component),J=new(function(){function t(){Object(l.a)(this,t),this.subs=new R,this.searchTimer=void 0,this.currentSearch=void 0,this._searching=!1}return Object(h.a)(t,[{key:"setSearching",value:function(t){this._searching!=t&&(this.subs.notifyFor("searching",t),this._searching=t)}},{key:"scheduleSearch",value:function(){var t=Object(u.a)(c.a.mark((function t(e){var a,n=this,r=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=r.length>1&&void 0!==r[1]?r[1]:400,this.searchTimer=clearTimeout(this.searchTimer),this.searchTimer=setTimeout(Object(u.a)(c.a.mark((function t(){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new g({name:e}),n.currentSearch=a,n.setSearching(!0),t.next=5,a.search();case 5:n.subs.notifyFor("query",void 0),n.setSearching(!1),n.subs.notifyFor("results",a.results);case 8:case"end":return t.stop()}}),t)}))),a);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"loadMoreResults",value:function(){var t=Object(u.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.currentSearch||!this.currentSearch.hasMoreResults){t.next=6;break}return this.setSearching(!0),t.next=4,this.currentSearch.search();case 4:this.setSearching(!1),this.subs.notifyFor("results",this.currentSearch.results);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"subscribe",value:function(t,e){return this.subs.add(t,e)}},{key:"searching",get:function(){return this._searching}},{key:"searchText",get:function(){return this.currentSearch?this.currentSearch.query.name:""}},{key:"hasMoreResults",get:function(){return!!this.currentSearch&&this.currentSearch.hasMoreResults}}]),t}()),V=function(t){Object(d.a)(a,t);var e=Object(p.a)(a);function a(t){var n;return Object(l.a)(this,a),(n=e.call(this,t)).state=void 0,n.favoritesTab={title:"Favorites",content:function(t){return r.a.createElement("div",{className:t},r.a.createElement(f,{stations:L.list,onStationSelected:function(t){return n.stationSelected(t)}}))}},n.playingTab={title:"Playing",content:function(t){return r.a.createElement(B,{className:t,station:n.state.selectedStation})}},n.aboutTab={title:"About",content:function(t){return r.a.createElement(z,{className:t})}},n.tabs=[n.favoritesTab,n.playingTab,n.aboutTab],n.searchTab={title:"Search",content:function(t){return r.a.createElement(v,{className:t,search:J,onStationSelected:function(t){return n.stationSelected(t)},key:"search"},"Search content")},scrollOffset:0},n.searchInput=r.a.createRef(),n.focusOnSearch=!1,n.tabChanged=!1,L.load(),n.state={selectedTab:n.aboutTab},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var t=Object(u.a)(c.a.mark((function t(){var e,a,n=this;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return L.onUpdated((function(){n.setState({})})),W.subscribe("station",(function(t){n.setState({}),document.title="Webradio (".concat(t.name,")")})),t.next=4,I();case 4:(e=t.sent)&&(W.setStation(e),this.stationSelected(e)),document.scrollingElement&&(a=document.scrollingElement,window.onscroll=function(t){a.scrollTop+80>a.scrollHeight-a.clientHeight&&n.state.selectedTab==n.searchTab&&J.hasMoreResults&&!J.searching&&J.loadMoreResults()});case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"changeTab",value:function(t){var e,a,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.tabChanged=this.state.selectedTab==t,this.state.selectedTab.scrollOffset=null!==(e=null===(a=document.scrollingElement)||void 0===a?void 0:a.scrollTop)&&void 0!==e?e:0,this.setState({selectedTab:t}),n&&this.setState({selectedStation:W.station})}},{key:"stationSelected",value:function(t){this.setState({selectedStation:t}),this.changeTab(this.playingTab,!1)}},{key:"searchTextChanged",value:function(t){var e=t.target.value;J.scheduleSearch(e)}},{key:"selectSearch",value:function(){this.changeTab(this.searchTab),this.focusOnSearch=!0}},{key:"componentDidUpdate",value:function(){var t;(this.focusOnSearch&&this.searchInput.current&&(this.searchInput.current.focus(),this.focusOnSearch=!1),document.scrollingElement)&&(this.state.selectedTab==this.searchTab?document.scrollingElement.scrollTop=null!==(t=this.searchTab.scrollOffset)&&void 0!==t?t:0:this.tabChanged&&(document.scrollingElement.scrollTop=0));this.tabChanged=!1}},{key:"render",value:function(){var t,e=this,a=this.tabs,n=this.state.selectedTab,s=a.map((function(t){var a=n==t?r.a.createElement("span",{className:"selection"}):void 0;return r.a.createElement("div",{className:"tab flexible vertical",key:t.title,onClick:function(a){return e.changeTab(t)}},r.a.createElement("span",{className:"title"},t.title),a)})),i=[this.searchTab].concat(a).map((function(t){return t.content(t==n?"visible":"hidden")})),o=this.searchTab==n;return r.a.createElement("div",{className:"radio-App"},r.a.createElement("div",{id:"top",className:"flexible vertical radio"},r.a.createElement("div",{className:"header flexible horizontal"},r.a.createElement("img",{className:"logo",src:"/webradio/logo.svg"}),r.a.createElement("span",{className:"divider ".concat(o?"blinking":"static")}),r.a.createElement("span",{className:"currently-playing ".concat(o?"hidden":"visible")},null===(t=W.station)||void 0===t?void 0:t.name),r.a.createElement("input",{className:"search flex1 ".concat(o?"visible":"hidden"),ref:this.searchInput,defaultValue:J.searchText,onInput:function(t){e.searchTextChanged(t)}})),r.a.createElement("div",{className:"tabs flexible horizontal"},r.a.createElement("span",{className:"flex1"}),s,r.a.createElement("span",{className:"flex1"}),r.a.createElement("a",{className:"search-tab",onClick:function(t){return e.selectSearch()}},r.a.createElement("img",{className:"icon search",src:"/webradio/icons/search.svg"})))),r.a.createElement("div",{id:"content",className:"radio flexible vertical"},i))}}]),a}(r.a.Component);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null,"my text")),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.3725dd64.chunk.js.map