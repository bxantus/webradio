(this["webpackJsonpwebradio-react"]=this["webpackJsonpwebradio-react"]||[]).push([[0],{14:function(t,e,a){t.exports=a(22)},19:function(t,e,a){},22:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),s=a(10),i=a.n(s),o=(a(19),a(2)),c=a(3),u=a(6),l=a(5),h=a(1),p=a.n(h),f=a(4),d=a(13),v=function(){function t(e){Object(o.a)(this,t),this.query=void 0,this.offset=0,this.results=[],this.query=e,void 0==this.query.limit&&(this.query.limit=20)}return Object(c.a)(t,[{key:"search",value:function(){var t=Object(f.a)(p.a.mark((function t(){var e,a,n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="https://www.radio-browser.info/webservice/json/stations/search?name=".concat(this.query.name,"&order=votes&reverse=true&limit=").concat(this.query.limit,"&offset=").concat(this.offset),t.next=3,fetch(a).then((function(t){return t.json()}));case 3:n=t.sent,r=n.map((function(t){return{name:t.name,id:t.id,tags:t.tags,country:t.country,language:t.language,icon:t.favicon}})),(e=this.results).push.apply(e,Object(d.a)(r));case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}();function m(t){return y.apply(this,arguments)}function y(){return(y=Object(f.a)(p.a.mark((function t(e){var a,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="https://www.radio-browser.info/webservice/v2/json/url/"+e.id,t.next=3,fetch(a).then((function(t){return t.json()}));case 3:if(!(n=t.sent)||!n.ok){t.next=8;break}return t.abrupt("return",n.url);case 8:return t.abrupt("return",void 0);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var b,g=function(t){Object(u.a)(a,t);var e=Object(l.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var t=this,e=this.props.stations;return e?e.map((function(e){return r.a.createElement("div",{onClick:function(){var a,n;return null===(a=t.props)||void 0===a||null===(n=a.onStationSelected)||void 0===n?void 0:n.call(a,e)},key:e.id},r.a.createElement("h3",null,e.name),r.a.createElement("div",null,e.country),r.a.createElement("hr",null))})):null}}]),a}(r.a.Component),k=function(t){Object(u.a)(a,t);var e=Object(l.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).searchTimer=void 0,n.searchList=void 0,n.state={search:b},n.searchList=r.a.createRef(),n}return Object(c.a)(a,[{key:"searchTextChanged",value:function(){var t=Object(f.a)(p.a.mark((function t(e){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.target.value,this.scheduleSearch(a);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"scheduleSearch",value:function(){var t=Object(f.a)(p.a.mark((function t(e){var a=this;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.searchTimer=clearTimeout(this.searchTimer),this.searchTimer=setTimeout(Object(f.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new v({name:e}),b=n,t.next=4,n.search();case 4:a.searchList.current&&(a.searchList.current.scrollTop=0),a.setState({search:n});case 6:case"end":return t.stop()}}),t)}))),400);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t,e,a,n=this,s=this.state.search;return s&&(a=s.results),r.a.createElement("div",{className:"search flexible vertical "+(null!==(t=this.props.className)&&void 0!==t?t:"")},r.a.createElement("input",{defaultValue:s?s.query.name:"",onInput:function(t){n.searchTextChanged(t)}}),r.a.createElement("div",{className:"results flexible vertical",style:{flex:1}},r.a.createElement("div",{ref:this.searchList,className:"scrollable"},r.a.createElement(g,{stations:a,onStationSelected:null===(e=this.props)||void 0===e?void 0:e.onStationSelected}))))}}]),a}(r.a.Component),w=a(11),S=a(12),E=new(function(){function t(){Object(o.a)(this,t),this.player=void 0,this.station=void 0,this.statusEmitter=[]}return Object(c.a)(t,[{key:"setStation",value:function(){var t=Object(f.a)(p.a.mark((function t(e){var a,n=this;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.player&&(this.player.off(),this.player.stop(),this.player.unload()),this.fireStatusChange("load","station"),this.station=e,t.next=5,m(e);case 5:(a=t.sent)?(this.player=new S.Howl({src:a,autoplay:!1,html5:!0}),this.fireStatusChange("load","stream"),this.player.on("load",(function(){return n.fireStatusChange("load","start playing")})),this.player.on("play",(function(){return n.fireStatusChange("play")})),this.player.on("stop",(function(){return n.fireStatusChange("stop")})),this.player.on("pause",(function(){return n.fireStatusChange("stop")})),this.player.on("loaderror",(function(){return n.fireStatusChange("error","loading the stream failed")})),this.player.on("playerror",(function(){return n.fireStatusChange("error","playback error")}))):this.fireStatusChange("error","cannot resolve station url");case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"play",value:function(){var t;null===this||void 0===this||null===(t=this.player)||void 0===t||t.play()}},{key:"pause",value:function(){var t;null===this||void 0===this||null===(t=this.player)||void 0===t||t.pause()}},{key:"fireStatusChange",value:function(t,e){var a,n=Object(w.a)(this.statusEmitter);try{for(n.s();!(a=n.n()).done;){(0,a.value)(t,e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"onStatusChanged",value:function(t){return this.statusEmitter.push(t),t}},{key:"offStatusChanged",value:function(t){var e=this.statusEmitter.findIndex((function(e){return t==e}));e>=0&&this.statusEmitter.splice(e,1)}}]),t}()),j=function(t){Object(u.a)(a,t);var e=Object(l.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={status:"stop"},t.statusChangeId=void 0,t}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.statusChangeId=E.onStatusChanged((function(e,a){var n;E.station&&(null===(n=t.props.station)||void 0===n?void 0:n.id)==E.station.id&&t.setState({status:e,detail:a})}))}},{key:"componentWillUnmount",value:function(){this.statusChangeId&&E.offStatusChanged(this.statusChangeId)}},{key:"togglePlayback",value:function(){var t=Object(f.a)(p.a.mark((function t(){var e;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.props.station){t.next=2;break}return t.abrupt("return");case 2:if("play"==this.getPlayStatus()){t.next=10;break}if((null===(e=E.station)||void 0===e?void 0:e.id)==this.props.station.id){t.next=7;break}return t.next=7,E.setStation(this.props.station);case 7:E.play(),t.next=11;break;case 10:E.pause();case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getPlayStatus",value:function(){var t,e=this.state.status;return this.props.station&&this.props.station.id!=(null===(t=E.station)||void 0===t?void 0:t.id)&&(e="stop"),e}},{key:"render",value:function(){var t,e,a=this,n=this.props.station;if(!n)return null;var s,i=this.getPlayStatus(),o=null!==(e={play:"Stop",stop:"Play",load:"Loading",error:"Error ".concat(null!==(t=this.state.detail)&&void 0!==t?t:"")}[i])&&void 0!==e?e:"Error";return this.state.detail&&(s=r.a.createElement("span",null,this.state.detail)),r.a.createElement("div",{className:this.props.className},r.a.createElement("h2",null,n.name),r.a.createElement("p",null,"in: ",n.country),r.a.createElement("p",null,"tags: ",n.tags),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(t){return a.togglePlayback()}},o)," ",s),r.a.createElement("div",null,r.a.createElement("button",null,"Add to favorites"),r.a.createElement("button",null,"Vote!")))}}]),a}(r.a.Component),O=function(t){Object(u.a)(a,t);var e=Object(l.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"about "+this.props.className},r.a.createElement("h2",null,"About"),r.a.createElement("p",null,"Open source webradio implementation using React."),r.a.createElement("p",null,"Uses the api provided by ",r.a.createElement("a",{href:"http://www.radio-browser.info"},"http://www.radio-browser.info")),r.a.createElement("p",null,"If you find any issues, or have feature requests please report them at the project's github page: ",r.a.createElement("a",{href:"https://github.com/bxantus/webradio"},"https://github.com/bxantus/webradio")))}}]),a}(r.a.Component),x=function(t){Object(u.a)(a,t);var e=Object(l.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))).state={selectedTab:"Search",selectedStation:{id:1,name:"X-id",tags:"alternative, rock",country:"iceland",language:"",icon:""}},t}return Object(c.a)(a,[{key:"changeTab",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setState({selectedTab:t.title}),e&&this.setState({selectedStation:E.station})}},{key:"stationSelected",value:function(t){this.setState({selectedStation:t}),this.changeTab(this.tabs[2],!1)}},{key:"render",value:function(){var t=this,e=this.tabs,a=this.state.selectedTab,n=e.find((function(t){return t.title===a})),s=e.map((function(e){return r.a.createElement("span",{className:e===n?"tab selected":"tab",key:e.title,onClick:function(a){return t.changeTab(e)}},e.title)})),i=e.map((function(t){return t.content(t==n?"visible":"hidden")}));return r.a.createElement("div",{className:"radio-App flexible vertical"},r.a.createElement("div",{className:"tabs"},s),i)}},{key:"tabs",get:function(){var t=this;return[{title:"Search",content:function(e){return r.a.createElement(k,{className:e,onStationSelected:function(e){return t.stationSelected(e)}},"Search content")}},{title:"Favorites",content:function(t){return r.a.createElement("div",{className:t},"My favorites")}},{title:"Play",content:function(e){return r.a.createElement(j,{className:e,station:t.state.selectedStation})}},{title:"About",content:function(t){return r.a.createElement(O,{className:t})}}]}}]),a}(r.a.Component);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null,"my text")),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.babf423f.chunk.js.map